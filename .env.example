# ==============================================================================
# ‚ö†Ô∏è SETUP GUIDE: DEVELOPMENT (POTATO MODE) v0.4
# ==============================================================================
# This file is your Local Secrets manager. 
# It connects the Local Logic (Codespace/IDX) to Cloud Services (Atlas/Telegram).

---

### ===================================
### ‚ö†Ô∏è SETUP GUIDE: PRODUCTION VS DEVELOPMENT (POTATO MODE)
### ===================================

### COPY this file to .env and uncomment/edit the lines below based on your environment.

## üü¢ MODE A: ORACLE VPS / LOCAL DOCKER DESKTOP (PRODUCTION SIMULATION)
### Keep defaults below. 
### -> `MONGO_URL=mongodb://db-mongo:27017/shadow_db`
### -> `REDIS_URL=redis://db-redis:6379/0`

## üü† MODE B: CLOUD IDE (CODESPACES / PROJECT IDX)
## Change these 4 variables to prevent crashes:

### 1. `MODE=DEV`
### 2. `DOMAIN_NAME=your-tunnel-id.trycloudflare.com` (Get this from Cloudflared logs)
### 3. `MONGO_URL=mongodb+srv://user:pass@cluster.mongodb.net/shadow_dev` (Use Atlas Free Tier)
### 4. `REDIS_URL=rediss://default:pass@url.upstash.io:6379` (Use Upstash Free Tier - Note 'rediss' for SSL)

### ==================================

---

# --- üåç ENVIRONMENT CONTEXT ---
MODE=DEV   # DEV (Verbose/Bypass) | PROD (Strict)
# Get this from 'cloudflared' logs in your terminal. Updates on every restart.
DOMAIN_NAME=your-tunnel-id.trycloudflare.com 
LOG_LEVEL=INFO

# --- üîê SECURITY & AUTHENTICATION ---
# Random string for generating User JWTs
JWT_SECRET=change_me_to_random_string_dev 
# Handshake between Nginx and Go Streamer (Must match nginx.conf)
SECURE_LINK_SECRET=change_me_to_nginx_hash
# Header X-Shadow-Secret for protecting API from script kiddies
API_SECRET_KEY=shadow_super_secret_dev_key

# --- üóùÔ∏è TELEGRAM IDENTITY (The Keys) ---
# Application credentials (my.telegram.org)
TG_API_ID=12345678
TG_API_HASH=your_api_hash_here

# 1. Manager Bot (The Brain) - Get from @BotFather
TG_BOT_TOKEN=123:ABC...

# 2. Worker Bot (Safe Testing) - Get from @BotFather
TG_WORKER_BOT_TOKEN=123:ABC...

# 3. Stream Engine Bot (Output) - Get from @BotFather
TG_STREAM_BOT_TOKEN=123:ABC...

# 4. User Session String (The Heavy Lifter)
# Generated via `python3 scripts/gen_session.py`. 
# Used by Go Engine & Worker for MTProto High-Speed transfer.
TG_SESSION_STRING=1BVtsOAQBu...

# 5. Super Admin ID (Your personal User ID from @IdBot)
TG_OWNER_ID=123456789

# --- üì° CHANNEL MAPPING (The Warehouse) ---
# Primary Video Storage (Admin Only)
TG_LOG_CHANNEL_ID=-100xxxxxxxxxx

# Secondary Redundancy (Backup Channel - Forward Copy)
TG_BACKUP_CHANNEL_ID=-100xxxxxxxxxx

# Crowdsource/Quarantine (Where user uploads go for approval)
TG_DUMP_CHANNEL_ID=-100xxxxxxxxxx

# Public Updates (Where "New Movie" Cards are posted)
TG_UPDATE_CHANNEL_ID=-100xxxxxxxxxx

# Audio/Music Storage (ShadowTunes Engine)
TG_MUSIC_CHANNEL_ID=-100xxxxxxxxxx

# --- üíæ DATABASES (Cloud Tiers) ---
# MongoDB Atlas Connection String
# Ensure /shadow_dev is at the end to prevent prod pollution
MONGO_URL=mongodb+srv://user:pass@cluster.mongodb.net/shadow_dev?retryWrites=true&w=majority

# Upstash Redis Connection String
REDIS_URL=rediss://default:pass@redis-endpoint.upstash.io:6379

# --- üîå FEATURES & BRANDING ---
# File renaming tag (e.g. Avenger.[ShadowSystem].mp4)
FILE_BRANDING_TAG=[ShadowSystem]

# Enable 'Smart Rename' using PTN parsing?
AUTO_RENAME_VIDEOS=True

# Generate 30s sample clips? (CPU Heavy - Set False if IDE is slow)
GENERATE_SAMPLES=Flase

# --- üé• METADATA SOURCES ---
# TheMovieDB v3 API Key (Not v4 Token)
TMDB_API_KEY=your_tmdb_key_here
# MyAnimeList Client ID (Optional, fallback is Jikan free API)
MAL_CLIENT_ID=

# --- üí∞ MONETIZATION (Revenue Engine) ---
# Link Shortener (e.g., GPlinks) - Used for Zip Packs/Downloads
SHORTENER_API_URL=https://gplinks.in/api
SHORTENER_API_TOKEN=your_token_here

# Ad Network (Adsterra) - Used for Pop-unders & VAST
ADSTERRA_PID=your_placement_id_here

# --- ‚òÅÔ∏è MIRRORS & EMBEDS (The Daisy Chain) ---
# Used for "Remote Upload" via Manager Logic

# 1. Download/Backup Mirrors (Passive Income/PPD)
PIXELDRAIN_KEY=your_key_here
STREAMWISH_KEY=your_key_here
ABYSS_KEY=your_key_here
GOFILE_TOKEN=your_token_here

# 2. Embed Hosts (Free Tier, Streaming Failover)
VIDHIDE_API_KEY=your_key_here
STREAMTAPE_API_LOGIN=your_login
STREAMTAPE_API_KEY=your_key_here
FILELIONS_API_KEY=your_key_here

# --- üç™ SYSTEM PATHS ---
# Cookie file for bypassing Gallery-DL, YouTube/Geo blocks
# In Docker, we map this to /app/cookies.txt
COOKIES_FILE_PATH=/app/cookies.txt

# --- üß™ CONTAINER SPECIFIC CONFIG (Not Global) ---
# Do not move these to settings.py
# These control local docker behavior only
WORKER_MODE=BOT                # 'BOT' for Safe Testing, 'USER' for Real Speed
SESSION_FILE=worker_video_1    # Which session file to load from /app/sessions
SESSION_FOLDER=/app/sessions   # Mount point
WORKER_CONCURRENCY=3           # Max downloads per container